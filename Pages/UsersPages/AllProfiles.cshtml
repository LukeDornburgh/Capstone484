@page
@using Lab1.Pages.DB_Class;
@using System.Data.SqlClient;
@model Lab1.Pages.UsersPages.AllProfilesModel
@{
    ViewData["Title"] = "My Profile";
}

<h2 class="h2">All Users</h2>

<form asp-page="AllProfiles" asp-page-handler="Search">
    <input asp-for="searchText" type="text" placeholder="Search for a project" />
    <button type="submit" class="simpleButton">Search</button>
</form>

<a asp-page="AllProfiles" class="btn btn-secondary">&larr; Go Back</a>

<table class="table table-bordered table-striped table-hover table-responsive">
    @*<thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>ProfessionalEmail</th>
            <th>Phone</th>
            <th>Student or Faculty?</th>
            <th>View Users Profile</th>
            <th>Invite to a project</th>
        </tr>
    </thead>*@
    <tbody>

        @{
            if(Model.searchText != null){
                SqlDataReader QueryResults = DBClass.UserSearch(Model.searchText);

                while(QueryResults.Read()){
                    
                    <div class="card">
                       <img src="~/images/User.png" style="width:35%" height="100">
                       <div class="container">
                           <h4><b>@QueryResults["FirstName"] @QueryResults["LastName"]</b></h4>
                           <p>@QueryResults["Email"]</p>
                           <p>@QueryResults["ProfessionalEmail"]</p>
                           <p>@QueryResults["Phone"]</p>
                           <p>@QueryResults["Position"]</p>
                           <p><a asp-page="ViewOtherUser" asp-route-UserID="@QueryResults["UserID"]" class="simpleButton">View Profile</a></p>
                           <p><a asp-page="/ProjectsPages/ProjectInvite" asp-route-UserID="@QueryResults["UserID"]" class="simpleButton">Invite to my projects</a></p>
                       </div>
                    </div>
                  
                    <!--<tr>
                        <td>@QueryResults["FirstName"]</td>
                        <td>@QueryResults["LastName"]</td>
                        <td>@QueryResults["Email"]</td>
                        <td>@QueryResults["ProfessionalEmail"]</td>
                        <td>@QueryResults["Phone"]</td>
                        <td>@QueryResults["Position"]</td>
                        <td>
                            <a asp-page="ViewOtherUser" asp-route-UserID="@QueryResults["UserID"]" class="simpleButton">View Profile</a>
                        </td>
                        <td>
                            <a asp-page="/ProjectsPages/ProjectInvite" asp-route-UserID="@QueryResults["UserID"]" class="simpleButton">Invite to my projects</a>
                        </td>
                        
                   </tr>-->
                }
            }
            else {
                foreach (var user in Model.UserList)
                {

                    <div class="card">
                        <img src="~/images/User.png" style="width:35%" height="100">
                        <div class="container">
                            <h4><b>@user.FirstName @user.LastName</b></h4>
                            <p>@user.Email</p>
                            <p>@user.ProfessionalEmail</p>
                            <p>@user.Phone</p>
                            <p>@user.Position</p>
                            <p> <a asp-page="ViewOtherUser" asp-route-UserID="@user.UserID" class="simpleButton">View Profile</a> </p>
                            <p> <a asp-page="/ProjectsPages/ProjectInvite" asp-route-UserID="@user.UserID" class="simpleButton">Invite to my projects</a> </p>
                        </div>
                    </div>
                    
                    //<tr>
                    //    <td>@user.FirstName</td>
                    //    <td>@user.LastName</td>
                    //    <td>@user.Email</td>
                    //    <td>@user.ProfessionalEmail</td>
                    //    <td>@user.Phone</td>
                    //    <td>@user.Position</td>
                    //    <td> <a asp-page="ViewOtherUser" asp-route-UserID="@user.UserID" class="simpleButton">View Profile</a> </td>
                    //    <td>
                    //        <a asp-page="/ProjectsPages/ProjectInvite" asp-route-UserID="@user.UserID" class="simpleButton">Invite to my projects</a>
                    //    </td>
                    //</tr>
                }
            }

        }
    </tbody>
</table>
<br />
<br />

